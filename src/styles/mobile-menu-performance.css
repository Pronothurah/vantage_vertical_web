/**
 * Performance-optimized CSS for Mobile Menu
 * 
 * This stylesheet provides GPU-accelerated animations and optimized styles
 * for the mobile navigation menu to ensure smooth 60fps performance.
 */

/* Mobile menu container with hardware acceleration */
.mobile-menu-container {
  /* Enable hardware acceleration */
  transform: translateZ(0);
  will-change: transform, opacity;
  
  /* Optimize rendering */
  backface-visibility: hidden;
  perspective: 1000px;
  
  /* Smooth transitions */
  transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1),
              opacity 300ms cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Position and layout */
  position: relative;
  background: white;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  
  /* Prevent layout shifts */
  contain: layout style paint;
}

/* Mobile menu content - show all items without scrolling */
.mobile-menu-scrollable {
  /* Hardware acceleration for smooth animations */
  transform: translateZ(0);
  will-change: transform;
  
  /* Position and sizing - no scrolling needed */
  position: relative;
  overflow: visible;
  
  /* Auto height to fit all content */
  height: auto;
  max-height: none;
  
  /* Prevent content jumping */
  contain: layout style;
}

/* No scrollbar needed since all items are visible */

/* Menu content wrapper */
.mobile-menu-content {
  /* Prevent layout shifts */
  contain: layout style;
  
  /* Padding for scroll indicators */
  padding: 8px 0;
  
  /* Minimum height to prevent content jumping */
  min-height: var(--menu-total-height, auto);
}

/* Menu items with optimized animations */
.mobile-menu-item {
  /* Hardware acceleration for hover effects */
  transform: translateZ(0);
  will-change: background-color, transform;
  
  /* Smooth transitions */
  transition: background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
              transform 200ms cubic-bezier(0.4, 0, 0.2, 1),
              color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Layout optimization */
  contain: layout style;
  
  /* Base styles */
  display: block;
  padding: 12px 24px;
  text-decoration: none;
  color: #212529;
  font-weight: 500;
  border-left: 4px solid transparent;
  
  /* Prevent text selection during touch */
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  
  /* Touch optimization */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* Active menu item */
.mobile-menu-item.active {
  color: #D72638;
  background-color: rgba(215, 38, 56, 0.05);
  border-left-color: #D72638;
}

/* Hover and focus states with GPU acceleration */
.mobile-menu-item:hover,
.mobile-menu-item:focus {
  background-color: rgba(215, 38, 56, 0.05);
  transform: translateX(2px);
}

.mobile-menu-item:active {
  transform: translateX(1px) scale(0.98);
}

/* CTA button in mobile menu */
.mobile-menu-cta {
  /* Hardware acceleration */
  transform: translateZ(0);
  will-change: transform, box-shadow;
  
  /* Smooth transitions */
  transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1),
              background-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Layout optimization */
  contain: layout style;
  
  /* Base styles */
  display: block;
  margin: 12px 24px;
  padding: 12px 24px;
  background: #D72638;
  color: white;
  text-align: center;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  
  /* Touch optimization */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.mobile-menu-cta:hover,
.mobile-menu-cta:focus {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(215, 38, 56, 0.3);
  background: #B91C2C;
}

.mobile-menu-cta:active {
  transform: translateY(0) scale(0.98);
  box-shadow: 0 2px 8px rgba(215, 38, 56, 0.2);
}

/* Performance optimizations for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .mobile-menu-container,
  .mobile-menu-scrollable,
  .mobile-menu-item,
  .mobile-menu-cta {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    scroll-behavior: auto !important;
  }
  
  .mobile-menu-scrollable {
    -webkit-overflow-scrolling: auto;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .mobile-menu-container {
    border: 2px solid;
  }
  
  .mobile-menu-item {
    border-bottom: 1px solid;
  }
  
  .mobile-menu-scrollable::before,
  .mobile-menu-scrollable::after {
    display: none;
  }
}

/* Dark mode optimizations */
@media (prefers-color-scheme: dark) {
  .mobile-menu-container {
    background: #1f2937;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  
  .mobile-menu-item {
    color: #e5e7eb;
  }
  
  .mobile-menu-item.active {
    color: #D72638;
    background-color: rgba(215, 38, 56, 0.1);
    border-left-color: #D72638;
  }
  
  .mobile-menu-item:hover,
  .mobile-menu-item:focus {
    background-color: rgba(215, 38, 56, 0.1);
  }
  
  .mobile-menu-scrollable::before {
    background: linear-gradient(to bottom, 
      rgba(31, 41, 55, 0.9) 0%, 
      rgba(31, 41, 55, 0.7) 50%,
      transparent 100%);
  }
  
  .mobile-menu-scrollable::after {
    background: linear-gradient(to top, 
      rgba(31, 41, 55, 0.9) 0%, 
      rgba(31, 41, 55, 0.7) 50%,
      transparent 100%);
  }
}

/* Performance monitoring styles (development only) */
.mobile-menu-performance-debug {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 12px;
  z-index: 9999;
  pointer-events: none;
}

.mobile-menu-performance-debug.warning {
  background: rgba(255, 165, 0, 0.8);
  color: black;
}

.mobile-menu-performance-debug.error {
  background: rgba(255, 0, 0, 0.8);
  color: white;
}

/* Utility classes for performance optimization */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

.smooth-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overscroll-behavior: contain;
}

.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

.touch-optimized {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* Container queries for responsive optimization */
@container (max-height: 400px) {
  .mobile-menu-content {
    padding: 4px 0;
  }
  
  .mobile-menu-item {
    padding: 8px 24px;
  }
  
  .mobile-menu-cta {
    margin: 8px 24px;
    padding: 8px 24px;
  }
}

@container (max-height: 300px) {
  .mobile-menu-scrollable::before,
  .mobile-menu-scrollable::after {
    height: 4px;
  }
}